<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Daily Path</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600&display=swap" rel="stylesheet">
<style>
:root {
  --cream: #f2eee8;
  --pink: #e8c0c7;
  --silver: #bfc0c6;
  --green: #8fbf8a;
  --yellow: #f2d97f;
  --red: #d97b7f;
  --text: #3b3b3b;
}

body {
  margin:0;
  font-family:'Playfair Display', serif;
  background: linear-gradient(var(--cream), var(--pink));
  color: var(--text);
}

header {
  text-align:center;
  padding:3rem 1rem;
}

header h1 {
  font-size:2.5rem;
  margin-bottom:0.3rem;
}

header p {
  opacity:0.7;
  margin:0.2rem 0;
}

a { text-decoration:none; color:var(--text); }

.container {
  max-width:900px;
  margin:auto;
  padding:2rem;
}

.card {
  background: rgba(255,255,255,0.9);
  border-radius:12px;
  padding:2rem;
  margin-bottom:2rem;
  box-shadow:0 10px 30px rgba(0,0,0,0.08);
}

h2 { margin-bottom:1rem; }

.task {
  display:flex;
  align-items:center;
  margin-top:0.8rem;
  padding:0.6rem;
  background:#fff;
  border-left:4px solid var(--silver);
  border-radius:6px;
}

.task.integral { border-color:#b07a8a; }
.task.should { border-color:#9c9cab; }
.task.optional { border-color:#cfcfd4; }

.task input { width:auto; margin-right:0.8rem; }

.hidden { display:none; }

.path { font-size:1.2rem; margin-bottom:1rem; }

footer {
  text-align:center;
  padding:3rem 1rem;
  font-size:0.9rem;
  opacity:0.6;
}

/* Buttons for morning check-in */
.button-group {
  display:flex;
  gap:1rem;
  margin-top:0.5rem;
  margin-bottom:1rem;
}

.button-group button {
  flex:1;
  padding:0.6rem;
  border:1px solid var(--silver);
  border-radius:20px;
  background: var(--cream);
  font-family:inherit;
  cursor:pointer;
  transition:0.2s;
}

.button-group button.selected {
  background: var(--pink);
  border-color: var(--pink);
  color:#fff;
}

.button-group button:hover {
  background: var(--pink);
  color:#fff;
}

/* Photo placeholder */
.photo-box {
  width: 100%;
  display: flex;
  justify-content: center;
  margin-bottom: 1.5rem;
}

.photo {
  width: 100%;
  max-width: 500px;
  border: 5px solid var(--cream);
  border-radius: 12px;
  transition: transform 0.3s ease;
}

.photo:hover {
  transform: scale(0.97);
}


.photo-box input[type="file"] {
  position:absolute;
  width:100%;
  height:100%;
  opacity:0;
  cursor:pointer;
}

.photo-box p {
  pointer-events:none;
  font-size:1rem;
  text-align:center;
}
</style>
</head>
<body>

<header>
  <h1>Daily Path</h1>
  <p>So efficient girl!</p>
  <p><a href="archive.html">View Archive</a></p>
</header>

<div class="container">

  <!-- Photo upload -->
 <div class="photo-box">
  <img src="cropped_deer.jpg" alt="Your photo" class="photo">
</div>

  
  <!-- Night Setup -->
  <div class="card">
    <h2>Night Setup</h2>
    <input id="taskInput" placeholder="Task">
    <div class="button-group">
      <button data-value="integral" onclick="setImportance(this)">Integral</button>
      <button data-value="should" onclick="setImportance(this)">Should Do</button>
      <button data-value="optional" onclick="setImportance(this)">Would Like To</button>
    </div>
    <button onclick="addTask()">Add Task</button>
    <div id="taskList"></div>
  </div>

  <!-- Morning Check-In -->
  <div class="card">
    <h2>Morning Check-In</h2>

    <p>How much did you sleep?</p>
    <div class="button-group" id="sleepButtons">
      <button data-value="good">Enough</button>
      <button data-value="bad">Very little</button>
    </div>

    <p>How do you feel?</p>
    <div class="button-group" id="feelingButtons">
      <button data-value="good">Okay / Good</button>
      <button data-value="low">Low / Fragile</button>
    </div>

    <p>Did you wake up on time?</p>
    <div class="button-group" id="wakeButtons">
      <button data-value="yes">Yes</button>
      <button data-value="no">No</button>
    </div>

    <button onclick="decidePath()">Begin Day</button>
  </div>

  <!-- Day View -->
  <div class="card hidden" id="day">
    <div class="path" id="pathTitle"></div>
    <div id="dayTasks"></div>
    <button onclick="archiveDay()">Archive Day</button>
  </div>

</div>

<footer>
  Missing a day is natural.
</footer>

<script>
let tasks = JSON.parse(localStorage.getItem("tasks")) || [];
let importance = "integral";
let sleep="", feeling="", wake="";

function saveTasks() {
  localStorage.setItem("tasks", JSON.stringify(tasks));
}

// Night Setup
function setImportance(btn){
  importance = btn.dataset.value;
  btn.parentNode.querySelectorAll("button").forEach(b=>b.classList.remove("selected"));
  btn.classList.add("selected");
}

function addTask() {
  const text = document.getElementById("taskInput").value;
  if(!text) return;
  tasks.push({text, importance, done:false});
  document.getElementById("taskInput").value="";
  saveTasks();
  renderTasks();
}

function renderTasks() {
  const list = document.getElementById("taskList");
  list.innerHTML="";
  tasks.forEach(t=>{
    const div=document.createElement("div");
    div.className=`task ${t.importance}`;
    div.textContent=t.text;
    list.appendChild(div);
  });
}

renderTasks();

// Morning Check-In buttons
function setupButtons(id, variableName) {
  document.querySelectorAll(`#${id} button`).forEach(btn=>{
    btn.addEventListener("click", ()=>{
      window[variableName] = btn.dataset.value;
      btn.parentNode.querySelectorAll("button").forEach(b=>b.classList.remove("selected"));
      btn.classList.add("selected");
    });
  });
}

setupButtons("sleepButtons","sleep");
setupButtons("feelingButtons","feeling");
setupButtons("wakeButtons","wake");

// Day logic
function decidePath() {
  let path = "green";
  if(sleep==="bad" || feeling==="low") path="yellow";
  if(sleep==="bad" && wake==="no") path="red";
  showDay(path);
}

function showDay(path){
  document.getElementById("day").classList.remove("hidden");
  const title = document.getElementById("pathTitle");
  const container = document.getElementById("dayTasks");
  container.innerHTML="";
  title.textContent = path==="green"?"Green Path â€” Everything":path==="yellow"?"Yellow Path â€” Enough is enough":"Red Path â€” Only essentials";
  tasks.forEach((t,i)=>{
    if(path==="green" || (path==="yellow" && t.importance!=="optional") || (path==="red" && t.importance==="integral")){
      const div=document.createElement("div");
      div.className=`task ${t.importance}`;
      div.innerHTML=`<input type="checkbox" ${t.done?"checked":""} onchange="toggleDone(${i})">${t.text}`;
      container.appendChild(div);
    }
  });
  localStorage.setItem("currentPath", path);
}

function toggleDone(i){
  tasks[i].done=!tasks[i].done;
  saveTasks();
}

// Archive
function archiveDay(){
  const archive = JSON.parse(localStorage.getItem("archive"))||[];
  archive.push({
    date:new Date().toLocaleDateString(),
    path: localStorage.getItem("currentPath"),
    tasks:[...tasks]
  });
  localStorage.setItem("archive",JSON.stringify(archive));
  tasks=[];
  saveTasks();
  alert("Day archived ðŸŒ™");
  location.reload();
}
</script>

</body>
</html>
